#+BEGIN_HTML
---
layout: post
title: 一些linux命令行的memo
categories: [binary]
comments: true
---
#+END_HTML




- 文件头部插入多行文本 \\
  一堆周报文件，需要在头部插入特定行才能移植到新blog，于是：
  #+begin_src sh
sed -i '1i#+BEGIN_HTML\n---\nlayout: post\ntitle: 周报 \n/
{% include JB/setup %}
category: WORK\ntags:\n- 周报\n---\n#+END_HTML' /
*weekly*.org

  #+end_src

  - =sed= 的 =-i= 参数表示直接修改到文件，不打印。
  - 多行文本用=\n=作为分割



- 文件改名 \\
  #+begin_src sh
find . -name '*weekly*' > tmp
perl -ne 'chomp; s/.\///; /([0-9]{2})([0-9]{2})/; print "mv $_ /
2011-$1-$2-$_\n"' tmp > tmp1
source tmp1
rm -rf tmp*  
  #+end_src

  - 需要将 ~weekly-0102.org~ 的格式改为 ~2012-01-02-weekly.org~



- DOS 换行批量转 UNIX \\
  #+begin_src sh
 sed -i 's/^M//' *.c        # 在bash/tcsh中，将按Ctrl-M改为按Ctrl-V
 sed -i 's/\x0D//' *.c      # ssed、gsed 3.02.80，及更高版本
  #+end_src

- 更改图片链接 \\
  org 图片链接默认 =file:///= 的格式，在jekyll下不能识别。于是用脚本手
  工转换。
  #+begin_src sh
root@bt:~/ifq.github.com/_posts# sed -i 's/file:[a-zA-Z/-]*pic/\/pic/g' *wsec*.html
root@bt:~/ifq.github.com/_posts# grep 'file:[a-zA-Z/-]*pic' *root@bt:~/ifq.github.com/_posts# ls
  
  #+end_src

- 参考资料
  - http://www.grymoire.com/Unix/Sed.html#uh-42
  - http://sed.sourceforge.net/sed1line_zh-CN.html

